<!DOCTYPE html>
<html>
<head>
  <title>Erik's Webpage</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="./styles/base.css">
</head>

<body>
<main>

  <div id="preview-track" data-mouse-down-at="0" data-prev-percentage="0">
    <a href="./pages/contact.html">
      <div class="intro-card card">
        <img id="intro-image" class="card-image" src="./media/erik.png" draggable="false"></img>
        <p class="popup-text">Contact Me</p>
      </div>
    </a>
  </div>

</main>
<script src="scripts/gesture.js"></script>
<script>
  // Load projects from JSON file
  async function loadProjects() {
    const response = await fetch('./scripts/projects.json');
    const data = await response.json();
    const projects = data.projects.reverse(); // Reverse the order of projects to show newest first
    let thumbnailFile = "./media/default.png";

    const previewTrack = document.getElementById('preview-track');
    projects.forEach(project => {
      if (window.innderWidth <= 600) {
        thumbnailFile = `./media/${project.id}/thumbnail-alt.png`;
      } else if (window.innerWidth > 600) {
        thumbnailFile = `./media/${project.id}/thumbnail.png`;
      } 
      
      const projectCard = document.createElement('a');
      projectCard.href = `./pages/template.html?project=${project.id}`;
      projectCard.innerHTML = `
        <div class="project-card card">
          <img class="card-image" src="${thumbnailFile}" draggable="false"/>
          <p class="popup-text">${project.title}</p>
        </div>
      `;
      previewTrack.appendChild(projectCard);
    });
  }

  window.onload = () => {
    loadProjects();
  };
</script>
</body>
</html>
